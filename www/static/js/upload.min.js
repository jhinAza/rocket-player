var $jscomp={scope:{},checkStringArgs:function(b,d,c){if(null==b)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return b+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[d]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,d,c,e){if(d){c=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var a=b[e];a in c||(c[a]={});c=c[a]}b=b[b.length-1];e=c[b];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,c){var e=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===c&&(c=e.length);for(var a=Math.max(0,Math.min(c|0,e.length)),d=b.length;0<d&&0<a;)if(e[--a]!=b[--d])return!1;return 0>=d}},"es6-impl","es3");
$(function(){function b(a){console.log(a);$(".container").html("");bsAlert("Se ha subido el fichero correctamente, ahora seras redireccionado al inicio");setTimeout(function(){window.location.href="home.php";5E3})}function d(){$("#main").children("form").hide();$content='<h1>Se esta subiendo el fichero</h1>\r\n    <div class="progress">\r\n      <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="min-width: 10%;">\r\n        0%\r\n      </div>\r\n    </div>';
$("#main").append($content)}function c(a,b,c,d){$(".progress-bar").html(d+"%").css("width",d+"%")}function e(a,b,c){bsAlert("Ha ocurrido un error subiendo el archivo, por favor recarga la pagina\r\n    y vuelve a intentarlo en unos minutos.")}$("#upload").submit(function(a){a=!0;10>$("#video-name").val().length&&(a=!1,bsAlert("El contenido del campo nombre es demasiado corto.\r\n      Debe contener al menos 10 caracteres."));10>$("#video-desc").val().length&&(a=!1,bsAlert("El contenido del campo descripcion es demasiado corto.\r\n      Debe contener al menos 10 caracteres."));
-1===$("#video-tags")[0].selectedIndex&&(a=!1,bsAlert("Debe seleccionar al menos un tag para el video"));0===$("#video-input")[0].files.length&&(a=!1,bsAlert("Debe seleccionar un fichero para subir"));if(0===$("#img-input")[0].files.length)console.log("Hola!"),a=!1,bsAlert("Debe seleccionar una portada para el video");else if(-1==$("#img-input")[0].files[0].type.indexOf("image"))a=!1,bsAlert("El formato de la imagen no es soportado");else if(0<window.img.width){if(500<window.img.width||500<window.img.height)bsAlert("La imagen debe ser como maximo de 500px de ancho y alto"),
a=!1}else bsAlert("Por favor espere antes de volver a pulsar el boton de submit. Aun estamos preparando su formulario"),a=!1;a&&(window.File&&window.FileReader&&window.FileList&&window.Blob?524288E3<$("#video-input")[0].files[0].size&&bsAlert("El fichero es demasiado grande. No puede ser mayor de 500MB"):bsAlert("Tu navegador no soporta nuestro sistema de subida de ficheros\r\n        Por favor, descarga la ultima version de Google Chrome o Firefox"),options={target:"upload.php",beforeSubmit:d,success:b,
error:e,uploadProgress:c,resetForm:!1,method:"post",dataType:"html"},$(this).ajaxSubmit(options),console.log("YA?"));return!1});$("#upload-res").submit(function(a){a=!0;-1===$("#resource-lang")[0].selectedIndex&&"signal-language"!=$("#resource-type").val()&&(a=!1,bsAlert("Debe seleccionar un lenguaje para el recurso a menos que el recurso\r\n             sea de tipo lenguaje de se\u00f1as"));-1===$("#resource-type")[0].selectedIndex&&(a=!1,bsAlert("Debe se\u00f1eccionar un tipo de recurso"));if(0===
$("#res-input")[0].files.length)a=!1,bsAlert("Debe seleccionar un fichero para subir");else switch($("#resource-type").val()){case "subtitles":$("#res-input")[0].files[0].name.endsWith(".srt")||(bsAlert("Ha seleccionado subtitulos pero no un formato de subtitulos adecuado.\r\n            Por favor seleccione un fichero de tipo .srt"),a=!1);break;case "transcription":$("#res-input")[0].files[0].name.endsWith(".srt")||(bsAlert("Ha seleccionado trancripcion pero no un formato de transcripcion adecuado.\r\n            Por favor seleccione un fichero de tipo .srt"),
a=!1);break;case "signal-language":$("#res-input")[0].files[0].name.endsWith(".mp4")||(bsAlert("Ha seleccionado lenguaje de se\u00f1as pero no un formato de lenguaje de se\u00f1as adecuado.\r\n            Por favor seleccione un fichero de tipo .mp4"),a=!1)}window.File&&window.FileReader&&window.FileList&&window.Blob?524288E3<$("#res-input")[0].files[0].size&&(bsAlert("El fichero es demasiado grande. No puede ser mayor de 500MB"),a=!1):(bsAlert("Tu navegador no soporta nuestro sistema de subida de ficheros\r\n      Por favor, descarga la ultima version de Google Chrome o Firefox"),
a=!1);a&&(options={target:"resources.php",beforeSubmit:d,success:b,error:e,uploadProgress:c,resetForm:!1,method:"post",data:{video:url("?video")},dataType:"html"},$(this).ajaxSubmit(options));return!1});$("#video-input").change(function(a){$("#file-name").val(this.files[0].name)});$("#res-input").change(function(a){$("#file-name").val(this.files[0].name)});$("#img-input").change(function(a){a=window.URL||window.webkitURL;$("#img-name").val(this.files[0].name);var b=$("#img-input")[0].files[0];if(b)return window.img=
new Image,window.loaded=!1,img.onload=function(){window.loaded=!0},img.src=a.createObjectURL(b),!1})});
