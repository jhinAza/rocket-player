$(function(){function f(a){$("body").append(a);$("#myModal").modal("toggle");$("#myModal").modal("show");$("#myModal").on("hidden.bs.modal",function(a){$(this).detach()});$("#save").click(function(a){$.post({url:"/settings.php",data:$("#settingsModal").serialize(),success:location.reload(!0)})})}function g(a){$("#comment").val("");$("#length").html("");console.log(a)}function h(a){$("#follow").removeClass("btn-info").addClass("btn-warning").html("Dejar de seguir!").data("following","true");console.log(a)}
function k(a){console.log("Unfollowed!!");$("#follow").removeClass("btn-warning").addClass("btn-info").html("Seguir!").data("following","false");console.log(a)}function d(a){console.log(a)}function l(){console.log("Hola!!")}function c(a){options={url:"/requests.php",success:d,data:{type:"update-vote",vote:a,video:url("?video")}};$.post(options)}function e(a,b){options={url:"/requests.php",success:d,data:{type:"update-comment-vote",vote:a,comment:b}};$.post(options)}$("#loginUser").submit(function(a){a=
!0;0==user.value.length&&(a=!1,alert("El campo de usuario no puede estar vacio"));0==pass.value.length&&(a=!1,alert("El campo de la contrase\u00f1a no puede estar vacio"));return a});$("#settings").click(function(a){$.get({url:"/settings.php",success:f,dataType:"html"})});$("#check").click(function(a){$.each($(".check-list"),function(){$(this).children("input")[0].checked=!0})});$("#uncheck").click(function(a){$.each($(".check-list"),function(){$(this).children("input")[0].checked=!1})});$("#send").click(function(a){var b=
[];$.each($(".check-list"),function(){$(this).children("input")[0].checked&&b.push($(this).children("input")[0].value)});0<b.length&&$.post({url:"/truncate.php",data:{tables:b}})});$("#send-comment").click(function(a){comment=$("#comment").val();a=!0;300<comment.length&&(a=!1,alert("El comentario es demasiado largo"));a&&$.post({url:"/sendComment.php",success:g,data:$("#comment").serialize()})});$(".comment-response").click(function(a){console.log($(this).data("comment-id"));a="#"+$(this).parent().data("comment-id")+
" ";$("#comment").val(a).focus()});$("#comment").on("keyup",function(a){a=this.value.length;$("#length").html(a);300<=a?(this.value=this.value.substring(0,300),$("#length-btn").removeClass("btn-success").removeClass("btn-warning").addClass("btn-danger")):200<a?$("#length-btn").removeClass("btn-success").removeClass("btn-danger").addClass("btn-warning"):$("#length-btn").removeClass("btn-warning").removeClass("btn-danger").addClass("btn-success")});$("#follow").on("click",function(a){if(1==$(this).data("following")){a=
"unfollow";var b=k}else a="follow",b=h;$.post({url:"/requests.php",success:b,data:{type:a,followed:url("?uid")||$(this).data("uid")}})});$("#vote-up").on("click",function(a){$(this).data("voted")?c(0):c(1);$(this).toggleClass("active").data("voted",!$(this).data("voted"));$("#vote-down").removeClass("active").data("voted",!1)});$("#vote-down").on("click",function(a){$(this).data("voted")?c(0):c(-1);$(this).toggleClass("active").data("voted",!$(this).data("voted"));$("#vote-up").removeClass("active").data("voted",
!1)});$(".vote-comment").on("click",function(a){a=$(this).parent().data("comment-id");if($(this).data("voted"))e(0,a);else{var b=$(this).data("vote");e(b,a)}$(this).siblings(".vote-comment").removeClass("active").data("voted",!1);$(this).toggleClass("active").data("voted",!$(this).data("voted"))});$("#send-search").click(function(a){a=$("#search").val();console.log(a);3<a.length?window.location="/search.php?query="+a:alert("El contenido del campo de busqueda debe ser mayor de 3 caracteres")});$(".user-img").click(function(a){$("#img-file").trigger("click")});
$("#img-file").on("change",function(a){a={data:{type:"updateUserImage"},url:"/requests.php",type:"post",resetForm:!1,success:d,beforeSubmit:l};$("#img-form").ajaxSubmit(a)})});
