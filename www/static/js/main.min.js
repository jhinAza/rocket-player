$(function(){function e(a){$("body").append(a);$("#myModal").modal("toggle");$("#myModal").modal("show");$("#myModal").on("hidden.bs.modal",function(a){$(this).detach()});$("#save").click(function(a){$.post({url:"/settings.php",data:$("#settingsModal").serialize(),success:location.reload(!0)})})}function c(a){$("#comment").val("");$("#length").html("");console.log(a)}function f(a){$("#follow").removeClass("btn-info").addClass("btn-warning").html("Dejar de seguir!").data("following","true");console.log(a)}
function k(a){console.log("Unfollowed!!");$("#follow").removeClass("btn-warning").addClass("btn-info").html("Seguir!").data("following","false");console.log(a)}function g(a){console.log(a)}function l(){console.log("Hola!!")}function d(a){options={url:"/requests.php",success:g,data:{type:"update-vote",vote:a,video:url("?video")}};$.post(options)}function h(a,b){options={url:"/requests.php",success:g,data:{type:"update-comment-vote",vote:a,comment:b}};$.post(options)}$("#loginUser").submit(function(a){a=
!0;0==user.value.length&&(a=!1,bsAlert("El campo de usuario no puede estar vacio","danger"));0==pass.value.length&&(a=!1,bsAlert("El campo de la contrase\u00f1a no puede estar vacio","danger"));return a});$("#settings").click(function(a){$.get({url:"/settings.php",success:e,dataType:"html"})});$("#check").click(function(a){$.each($(".check-list"),function(){$(this).children("input")[0].checked=!0})});$("#uncheck").click(function(a){$.each($(".check-list"),function(){$(this).children("input")[0].checked=
!1})});$("#send").click(function(a){var b=[];$.each($(".check-list"),function(){$(this).children("input")[0].checked&&b.push($(this).children("input")[0].value)});0<b.length&&$.post({url:"/truncate.php",data:{tables:b}})});$("#send-comment").click(function(a){comment=$("#comment").val();a=!0;300<comment.length&&(a=!1,bsAlert("El comentario es demasiado largo","danger"));a&&$.post({url:"/sendComment.php",success:c,data:$("#comment").serialize()})});$(".comment-response").click(function(a){console.log($(this).data("comment-id"));
a="#"+$(this).parent().data("comment-id")+" ";$("#comment").val(a).focus()});$("#comment").on("keyup",function(a){a=this.value.length;$("#length").html(a);300<=a?(this.value=this.value.substring(0,300),$("#length-btn").removeClass("btn-success").removeClass("btn-warning").addClass("btn-danger")):200<a?$("#length-btn").removeClass("btn-success").removeClass("btn-danger").addClass("btn-warning"):$("#length-btn").removeClass("btn-warning").removeClass("btn-danger").addClass("btn-success")});$("#follow").on("click",
function(a){if(1==$(this).data("following")){a="unfollow";var b=k}else a="follow",b=f;$.post({url:"/requests.php",success:b,data:{type:a,followed:url("?uid")||$(this).data("uid")}})});$("#vote-up").on("click",function(a){$(this).data("voted")?d(0):d(1);$(this).toggleClass("active").data("voted",!$(this).data("voted"));$("#vote-down").removeClass("active").data("voted",!1)});$("#vote-down").on("click",function(a){$(this).data("voted")?d(0):d(-1);$(this).toggleClass("active").data("voted",!$(this).data("voted"));
$("#vote-up").removeClass("active").data("voted",!1)});$(".vote-comment").on("click",function(a){a=$(this).parent().data("comment-id");if($(this).data("voted"))h(0,a);else{var b=$(this).data("vote");h(b,a)}$(this).siblings(".vote-comment").removeClass("active").data("voted",!1);$(this).toggleClass("active").data("voted",!$(this).data("voted"))});$("#send-search").click(function(a){a=$("#searching").val();console.log(a);3<a.length?window.location="/search.php?query="+a:bsAlert("El contenido del campo de busqueda debe ser mayor de 3 caracteres",
"warning")});$("#searching").keydown(function(a){13==a.which&&(a.stopPropagation(),a.preventDefault(),$("#send-search").click())});$(".user-img").click(function(a){$("#img-file").trigger("click")});$("#img-file").on("change",function(a){a={data:{type:"updateUserImage"},url:"/requests.php",type:"post",resetForm:!1,success:g,beforeSubmit:l};$("#img-form").ajaxSubmit(a)});url("?register")&&("error"==url("?register")?bsAlert("El usuario o el correo ya existen","danger"):"ok"==url("?register")&&bsAlert("Se ha registrado correctamente",
"success"))});function bsAlert(e,c){var f='<div class="alert alert-'+(void 0===c?"warning":c)+'">\n\r\n  '+e+"\n\r\n  </div>";$("#alert-pos").append(f)};
